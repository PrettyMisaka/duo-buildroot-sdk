/dts-v1/;
#include "cv181x_base_riscv.dtsi"
#include "cv181x_asic_bga.dtsi"
#include "cv181x_asic_sd.dtsi"
#include "cv181x_default_memmap.dtsi"

&mipi_rx{
	snsr-reset = <&porta 2 GPIO_ACTIVE_LOW>, <&porta 2 GPIO_ACTIVE_LOW>, <&porta 2 GPIO_ACTIVE_LOW>;
};

&dac{
	/delete-property/ mute-gpio-l;
	/delete-property/ mute-gpio-r;
};

&i2c0 {
	status = "disabled";
};

&i2c1 {
	status = "okay";
};

&usb {
	vbus-gpio = <&portb 6 0>;
};

&wifisd {
	status = "okay";
	cap-sd-highspeed;
	sd-uhs-sdr25;
	sd-uhs-ddr50;
	sd-uhs-sdr104;
	min-frequency = <400000>;
	max-frequency = <187500000>;
};

&wifi_pin {
	compatible = "cvitek,wifi-pin";
	poweron-gpio = <&porta 15 GPIO_ACTIVE_HIGH>;
	wakeup-gpio = <&porte 7 GPIO_ACTIVE_HIGH>;
};

&uart4 {
	status = "okay";
};

/ {
	model = "Milk-V DuoS";
};

&spi0 {
	status = "okay";
	spi-max-frequency = <19200000>;
	/delete-node/ spidev@0;
	tsc2046@0 {
		reg = <0>;	/* CS0 */
		compatible = "ti,tsc2046";
		interrupt-parent = <&portb>;
		interrupts = <3 IRQ_TYPE_LEVEL_LOW>;	/* BOOT6 / GPIO 8 */
		spi-max-frequency = <2000000>;
		pendown-gpio = <&portb 3 IRQ_TYPE_LEVEL_LOW>;

		ti,x-min = /bits/ 16 <0>;
		ti,x-max = /bits/ 16 <8000>;
		ti,y-min = /bits/ 16 <0>;
		ti,y-max = /bits/ 16 <4800>;
		ti,x-plate-ohms = /bits/ 16 <40>;
		ti,pressure-max = /bits/ 16 <255>;

		wakeup-source;
	};
};

&spi3 {
	status = "okay";
	/delete-node/ spidev@0;
	display@0{
		compatible = "eastrising,er-tft035-6";  //匹配驱动名称，使用st7789的话修改为sitronix,st7789v_240x320
		reg = <0>;
		status = "okay";
		spi-max-frequency = <80000000>;
		dc-gpios = <&portb 22 GPIO_ACTIVE_HIGH>;
		reset-gpios = <&portb 12 GPIO_ACTIVE_HIGH>;
		rotation = <270>;
	};
};
